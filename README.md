# MFE5210-Assignment

## 因子1&2：A股动量/反转因子因子构造与回测

我们复现了2020年开源证券《A股市场中如何构造动量因子？》（见reference文件夹）的量化策略，通过振幅切割涨跌幅因子，构造具有显著动量效应的因子，并提供完整的回测与可视化分析。

## 因子意义

### 背景

- **传统涨跌幅因子**在A股普遍呈现**反转效应**（过去收益高的股票未来表现差）。
- 本策略从**交易行为维度**出发，通过**日度振幅切割**，分离出具有**动量效应**的因子。

### 因子定义

- **A因子（动量因子）**：选取窗口期（N）内**低振幅交易日**的涨跌幅加总，捕捉稳定趋势。
- **B因子（反转因子）**：选取窗口期（N）内**高振幅交易日**的涨跌幅加总，捕捉过度反应后的反转。


## 实现方式

### 核心逻辑

1. **数据预处理**  
   
   - 按股票代码和日期排序，计算日收益率和振幅。
   - 根据IC值确定最优超参数N和λ
   - 使用滑动窗口（最优超参数`N=160`）遍历历史数据。

2. **振幅切割**  
   
   - **A因子**：取窗口内振幅最低的`λ=70%`交易日，计算其收益加总。
   - **B因子**：取窗口内振幅最高的`1-λ=30%`交易日，计算其收益加总。

3. **因子计算**  
   
   - 向量化加速：利用`numpy.lib.stride_tricks.sliding_window_view`高效处理滑动窗口。
   - 代码函数：  
     - `calculate_A_factor_vectorized()`：计算动量因子。  
     - `calculate_B_factor_vectorized()`：计算反转因子。

## 回测结果

### 回测数据：
- 中证500股票池，日频数据，2010年5月-2025年5月，剔除ST，上市不足160日的股票，使用akshare获取

### 回测结果
#### 因子1：动量因子回测结果：
!["images/动量因子_收益.png"](images/动量因子_收益.png)
!["images/动量因子_IC.png"](images/动量因子_IC.png)

#### 因子2：反转因子回测结果：
!["images/反转_收益.png"](images/反转_收益.png)
!["images/反转_IC.png"](images/反转_IC.png)